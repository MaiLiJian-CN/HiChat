# HiChat - 实时即时通信系统

一个基于Go语言、Gin框架和Gorm ORM构建的即时通信系统，支持用户认证、实时消息传递、单聊/群聊等核心功能，架构设计清晰，可扩展性强。


## 项目版本演进

### v1.0 - 项目基础构建
- 完成项目整体架构设计，确定目录结构
- 初始化Git仓库和Go模块配置
- 搭建基础开发环境，集成Gin框架和Gorm ORM
- 设计并创建数据库表结构（以用户表为核心）
- 实现基础的错误处理和日志记录机制


### v2.0 - DAO层代码设计
- 完成数据访问层（DAO）封装，实现与数据库的交互
- 针对`UserBasic`等核心模型编写CRUD操作
- 实现数据库连接池配置和优化
- 添加数据校验逻辑（基于govalidator）
- 完成数据库迁移脚本，支持环境初始化


### v3.0 - Server层实现与JWT鉴权
- 开发业务逻辑层（Server），封装核心业务处理
- 实现用户注册、登录功能
- 集成JWT认证机制，完成令牌生成与验证
- 编写认证中间件，实现接口权限控制
- 完善API错误码体系，统一响应格式


### v4.0 - 业务框架完善与核心功能强化
- 优化v3版本的业务框架设计，提升代码可维护性
- 完善用户管理功能：优化登录、注册、删除账号流程，修复边界场景问题
- 增强数据校验与错误处理，提升系统稳定性
- 补充用户信息更新（头像、联系方式等）功能的完整性
- 优化数据库交互性能，减少冗余查询


### v5.0 - WebSocket实时通信与单聊实现
- 集成WebSocket协议，实现客户端与服务端的实时双向通信
- 设计并实现单聊通信机制，支持一对一消息实时收发
- 完成WebSocket连接管理（建立、心跳检测、断开重连）
- 实现消息实时推送功能，确保单聊消息的即时性
- 配套前端交互逻辑，支持单聊界面展示与消息历史查看


### v6.0 - 配置优化、多协议支持与消息存储升级
- 引入Viper配置管理工具，统一管理数据库、端口、密钥等配置参数，支持多环境配置
- 集成UDP协议，补充实时通信能力，优化消息传输效率
- 扩展通信功能：在单聊基础上实现群聊功能，支持多用户加入、群消息群发
- 引入Redis作为缓存层，实现聊天记录的高效存储与查询（基于有序集合存储，支持按时间排序）


## 技术栈
- 后端框架：Go 1.24+、Gin v1.9.1
- ORM工具：Gorm v2.0
- 认证方式：JWT (JSON Web Token)
- 数据库：MySQL 8.0（用户数据存储）
- 缓存/消息存储：Redis（聊天记录存储）
- 实时通信：WebSocket、UDP
- 配置管理：Viper
- 数据校验：govalidator
- 密码加密：bcrypt（带盐值哈希）


## 目录结构
```
HiChat/
├── config/         # 配置文件（Viper管理，支持多环境）
├── dao/            # 数据访问层（数据库、Redis交互）
├── middleware/     # 中间件（JWT认证、日志等）
├── common/         # 公共工具（加密、校验等）
├── model/          # 数据模型定义（用户、消息等）
├── router/         # 路由配置（HTTP、WebSocket路由）
├── server/         # 业务逻辑层（用户管理、消息处理等）
├── main.go         # 程序入口
└── README.md       # 项目说明
```


## 快速开始

### 前置要求
- Go 1.24及以上版本
- MySQL 8.0数据库
- Redis（用于存储聊天记录）
- Git


### 安装步骤
1. 克隆仓库
   ```bash
   git clone https://github.com/MaiLiJian-CN/HiChat.git
   cd HiChat
   ```

2. 安装依赖
   ```bash
   go mod tidy
   ```

3. 配置项目
   - 修改`config/`目录下的配置文件（支持多环境，如`config-dev.yaml`），配置MySQL、Redis连接信息、服务端口等

4. 初始化数据库
   ```bash
   # 执行数据库迁移（创建用户表等基础结构）
   go run test/main.go
   ```

5. 启动服务
   ```bash
   go run main.go
   ```


## 参考文档资料
原文作者：iceymoss
转自链接：https://learnku.com/articles/74484


## 许可证
本项目采用MIT许可证 - 详见LICENSE文件
